{% extends "base.html" %}

{% set title = room.name %}

{% block content %}
    <div class='wroom-header'>
        {% if username == room.creator %}
            <div class='inline-flex-container'> <!-- Шапка комнаты -->
                <input class='name-large input-on-focus changeble flex-grow' 
                       data-show-on-change='.save_roomname' id='roomname'
                       autocomplete="off" value='{{ room.name }}' maxlength='25' 
                       style='width: 500px;'>
                <button class='btn auto-width save_roomname'>Сохранить</button>
                <button id='reset' class='btn auto-width save_roomname'>Отмена</button>
            </div>
            <div id='helper__change_roomname' class='undone'>
                Вы может изменить имя просто нажав на него.<a href=''>Больше не показывать эту подсказку.</a>
            </div>
        {% else %}
            <span class='name-large'>{{ room.name }}</span>
        {% endif %}
    </div>
    <div class='inline-flex-container space-between'>
        <div class='wroom-clmn wroom-clmn-fixed' style='min-width: 200px'> <!-- Список с игроками -->
            <span class='name-medium'>Игроки</span>
            <div id='players_list'></div>
        </div>
{#         <div class='wroom-clmn wroom-clmn-fixed' style='min-width: 300px'>
            <span class='name-medium'>Карта</span>
            <div>
                <br>
                <div style='width: 100px;height: 100px; border-color: grey; border: 1px solid grey; background: var(--clr-m1-l)'>
                    <img> 
                </div>
                <p class='text-font' style='text-align: justify;'>
                    Описание карты. Lorem Ipsum - это текст-"рыба", часто используемый в печати и вэб-дизайне. Lorem Ipsum является стандартной "рыбой" для текстов на латинице с начала XVI века. В то время некий безымянный печатник создал большую коллекцию размеров и форм шрифтов, используя Lorem Ipsum для распечатки образцов.
                </p>
            </div>
        </div> #}
        <div class='wroom-clmn wroom-clmn-grow'>
            <span class='name-medium'>Чат</span>
            <div class='wroom-chat-msgs scroller'>
                {% for i in range(10) %}
                <div class='inline-flex-container'>
                    <a href="{{ url_for('my_profile') }}"><img class='user-ava-small' src='{{ user_ava }}'></a>
                    <div class='wroom-chat-info'>
                        <span class='name-medium clr-m1'>{{ username }}</span>
                        <span class='time'>13:{{ 44+i}}</span>
                        <p>
                            {# kek #}
Lorem Ipsum - это текст-"рыба", часто используемый в печати и вэб-дизайне. Lorem Ipsum является стандартной "рыбой" для текстов на латинице с начала XVI века. В то время некий безымянный печатник создал большую коллекцию размеров и форм шрифтов, используя Lorem Ipsum для распечатки образцов.
                        </p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class='inline-flex-container space-between'>
                <!-- Ввод -->
                <div
                    contenteditable='plaintext-only' 
                    class='chat-input scroller flex-grow' 
                    data-placeholder='Введите сообщение'>
                </div>
                <div>
                    <button class='btn auto-width border-grey'>Написать</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% set show_sidebar_r = true %}
{% set ub__hide_play_button = true %}
{% block sidebar_content %}
    <form action="javascript:void(0);">
        {% if username == room.creator %}
            <button class='btn' id='start_game'>Начать</button>
        {% endif %}
        <button class='btn'>Пригласить</button>
        <button class='btn' id='exit_room'>Выйти</button>
    </form>
{% endblock %}

{% block scripts %}
    <script type="text/javascript">
        $('#reset').click(function(){
            $('#roomname').val(function(){return $(this).attr('data-saved-value')}).trigger('change');
        })
        $('#roomname').on('change paste keyup', function(){$('#helper__change_roomname').css('display', 'none')})
    </script>
    {% include 'js/contenteditable.js' %}
    {% include 'js/onchange.js' %}
    {% include 'js/wroom.js' %}
{% endblock %}
